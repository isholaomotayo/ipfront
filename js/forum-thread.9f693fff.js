(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["forum-thread"],{1799:function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"forum__foot"},[s("ul",{staticClass:"pagination"},[0===t.prev?s("li",{staticClass:"pagination__item prev disabled"},[t._v("Prev")]):s("li",{staticClass:"pagination__item prev"},[s("router-link",{attrs:{to:{name:t.baseUrl,query:{limit:t.limit,offset:t.offset(t.prev-1)}}}},[t._v("Prev")])],1),t._l(t.pageArray,function(e){return s("li",{key:e,staticClass:"pagination__item",class:{active:t.current===e}},[t.current!==e?s("router-link",{attrs:{to:{name:t.baseUrl,query:{limit:t.limit,offset:t.offset(e-1)}}}},[t._v("\n\t\t\t\t"+t._s(e)+"\n\t\t\t")]):s("span",{staticClass:"current"},[t._v(t._s(e)+"\n\t\t\t")])],1)}),t.current===t.endIndex?s("li",{staticClass:"pagination__item prev disabled"},[t._v("\n\t\t\tNext\n\t\t")]):s("li",{staticClass:"pagination__item next"},[s("router-link",{attrs:{to:{name:t.baseUrl,query:{limit:t.limit,offset:t.offset(t.next-1)}}}},[t._v("\n\t\t\t\tNext\n\t\t\t")])],1)],2)])},i=[],r={name:"Pagination",props:{options:{type:Object,default:function(){return{limit:2,offset:0,total:0,baseUrl:"/"}}}},data:function(){return{total:this.options.total,limit:this.options.limit,baseUrl:this.options.baseUrl,maxPages:10,totalPages:null}},created:function(){this.totalPages=Math.ceil(this.total/this.maxPages)},computed:{pages:function(){return Math.min(Math.ceil(this.total/this.limit),this.maxPages)},current:function(){return Math.ceil(this.options.offset/this.limit)+1},prev:function(){return this.current>1?this.current-1:0},next:function(){return this.current<this.pages?this.current+1:0},pageArray:function(){for(var t=[],e=this.startIndex;e<=this.endIndex;e++)t[e]=e;return t.splice(0,this.startIndex),t},startIndex:function(){var t=math.ceil(this.maxPages/2);return this.current<=t+1?1:this.current===this.totalPages?this.totalPages-this.maxPages+1:this.ciurrent-t},endIndex:function(){return Math.min(this.startIndex+this.maxPages,this.totalPages)}},methods:{offset:function(t){return t<=0?0:this.limit*t}}},n=r,o=(s("498f"),s("2877")),u=Object(o["a"])(n,a,i,!1,null,"338508b2",null);e["a"]=u.exports},"1c32":function(t,e,s){"use strict";var a=s("f0b1"),i=s.n(a),r={post:{title:i.a.string().min(2).required(),forum_category_id:i.a.number().required(),body:i.a.string().min(2).required()},thread:{body:i.a.string().min(2).required()}};e["a"]=r},"498f":function(t,e,s){"use strict";var a=s("7f57"),i=s.n(a);i.a},"555f":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{staticClass:"lds-spinner",staticStyle:{background:"none"},attrs:{width:"50px",height:"50px",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"}},[s("g",{attrs:{transform:"rotate(0 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.9166666666666666s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(30 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.8333333333333334s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(60 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.75s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(90 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.6666666666666666s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(120 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.5833333333333334s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(150 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.5s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(180 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.4166666666666667s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(210 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.3333333333333333s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(240 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.25s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(270 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.16666666666666666s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(300 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.08333333333333333s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(330 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}})])])])},i=[],r={name:"Loader"},n=r,o=s("2877"),u=Object(o["a"])(n,a,i,!1,null,null,null);e["a"]=u.exports},"7f57":function(t,e,s){},"834b":function(t,e,s){"use strict";var a=s("c933"),i=s.n(a);i.a},"976f":function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.loading?[s("div",{staticClass:"loading"},[s("Loader")],1)]:[s("section",{staticClass:"section forum"},[s("div",{staticClass:"container"},[s("div",{staticClass:"section__row section__row--between"},[s("h4",{staticClass:"section__title"},[t._v(t._s(t.forumPost.title))]),s("button",{staticClass:"btn__link btn__link--sm",on:{click:function(e){t.$router.push("/create-post")}}},[t._v("Create New Post")])]),s("div",[s("router-link",{staticClass:"link",attrs:{to:{name:"forum"}}},[s("span",{staticClass:"icon"},[s("svg",{attrs:{width:"19",height:"14",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[s("path",{attrs:{d:"M14.28 3.85H1.34L4.06.8a.48.48 0 1 0-.72-.64L.28 3.6a1.1 1.1 0 0 0 0 1.46L3.34 8.5a.48.48 0 0 0 .68.04c.2-.18.22-.48.04-.68L1.34 4.8h12.94a3.76 3.76 0 0 1 0 7.52H12a.48.48 0 1 0 0 .96h2.28a4.72 4.72 0 0 0 0-9.44z",fill:"#000"}})])]),t._v(" Back to forum\n\t\t\t\t\t\t")]),s("button",{staticClass:"btn__plain",on:{click:t.reportForumTopic}},[t._v("\n                            report\n                        ")])],1)]),s("div",{staticClass:"container"},[s("div",{staticClass:"forum__wrapper"},[s("main",{staticClass:"forum__main"},[s("div",{staticClass:"forum__body"},[s("div",{staticClass:"forum__thread"},[s("ul",{},[s("li",{staticClass:"forum__post item__row"},[s("img",{staticClass:"post__img",attrs:{src:t.forumPost.user.avatar,alt:""}}),s("div",{staticClass:"item__body"},[s("div",{},[s("span",{staticClass:"title bold"},[t._v(t._s(t.forumPost.user.fname+" "+t.forumPost.user.lname))]),s("span",{staticClass:"grey"},[t._v(t._s(t._f("date")(t.forumPost.created_at)))])]),s("p",{staticClass:"forum__text main"},[t._v(t._s(t.forumPost.body))])])]),s("li",{staticClass:"forum__post item__row"},[s("img",{staticClass:"post__img",attrs:{src:t.forumPost.user.avatar,alt:""}}),s("form",{staticClass:"forum__post__form item__body",attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.createThread(e)}}},[s("label",{staticClass:"label--block",attrs:{for:"forum-thread"}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.itemData.body,expression:"itemData.body"}],staticClass:"input input--lg",class:[{"is-invalid":t.errors.body}],attrs:{name:"",id:"forum-thread",cols:"50",rows:"3",placeholder:"Type here to reply..."},domProps:{value:t.itemData.body},on:{keydown:function(e){t.clearErrors(e.target.name)},input:function(e){e.target.composing||t.$set(t.itemData,"body",e.target.value)}}})]),s("div",{staticClass:"btn-group"},[s("button",{staticClass:"btn__primary btn__primary--alt",attrs:{"v-bind":{disabled:t.loading||!t.itemData.body},type:"submit"},on:{click:function(e){return e.preventDefault(),t.createThread(e)}}},[t._v("Post Comment")]),t.loading?s("Loader"):t._e()],1)])])]),t.threads.length?s("h5",{staticClass:"bold"},[t._v(t._s(t.threads.length)+" comment"),t.threads.length>1?[t._v("s")]:t._e()],2):t._e(),s("ul",{staticClass:"forum__thread"},[t.loadingThreads?[s("div",{staticClass:"loading"},[s("Loader")],1)]:[t.threadsLoaded&&t.threads.length?t._l(t.threads,function(e){return s("li",{key:e.id},[s("div",{staticClass:"forum__post item__row thread"},[s("img",{staticClass:"post__img post__img--sm",attrs:{src:e.user.avatar,alt:""}}),s("div",{staticClass:"item__body"},[s("p",{staticClass:"forum__text"},[s("span",{staticClass:"bold"},[t._v(t._s(e.user.fname+" "+e.user.lname))]),t._v(" \n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.body))]),s("div",{staticClass:"item__meta"},[s("span",[t._v(t._s(t._f("date")(e.created_at)))]),s("button",{staticClass:"btn__plain btn__plain--sm",on:{click:function(s){t.reportForumComment(e)}}},[t._v("Report")])])])])])}):t.threadsLoaded?[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tNo Comments\n\t\t\t\t\t\t\t\t\t\t\t")]:[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\tError loading comments\n\t\t\t\t\t\t\t\t\t\t\t")]]],2),t.total>t.limit?s("Pagination",{attrs:{options:{limit:t.limit,offset:t.offset,total:t.total,baseUrl:t.baseUrl}}}):t._e()],1)])]),s("aside",{staticClass:"forum__right"},[s("section",{staticClass:"section__side"},[s("h3",{staticClass:"forum__title"},[t._v("Recent Posts")]),s("h6",{staticClass:"forum__title__meta"},[t._v("Be the first to comment on these new discussions and articles.")]),s("div",{staticClass:"forum__section"},[t.forumTopics.length?t._l(t.forumTopics.slice(0,5),function(e){return s("div",{key:e.id,staticClass:"item"},[s("div",{staticClass:"section__row"},[s("img",{staticClass:"post__img post__img--sm",attrs:{src:e.user.avatar,alt:""}}),s("span",{staticClass:"body"},[s("router-link",{staticClass:"item__link bold",attrs:{to:{name:"user-profile",params:{id:e.user.id}}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.user.fname+" "+e.user.lname)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\t")])],1),s("span",{staticClass:"grey"},[t._v("posted")])]),s("router-link",{attrs:{to:{name:"forum-thread",params:{id:e.id}}},nativeOn:{click:function(s){t.setForumPost(e)}}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.body)+"\n\t\t\t\t\t\t\t\t\t\t\t")]),s("div",{staticClass:"body__meta"})],1)}):[t._v("\n\t\t\t\t\t\t\t\t\t\tNo Posts yet\n\t\t\t\t\t\t\t\t\t")]],2)])])])])])]],2)},i=[],r=s("a4bb"),n=s.n(r),o=(s("ac6a"),s("cebc")),u=s("2f62"),l=s("555f"),c=s("1799"),d=s("e49c"),m=s("1c32"),f=s("c85d"),h=s("eae4"),_={name:"ForumThread",mixins:[d["a"]],data:function(){return{threads:[],loadingThreads:!1,threadsLoaded:!0,itemData:{body:""},errors:{},loading:!1,limit:6,offset:0,total:0,baseUrl:"",isTopicOwner:!1,isThreadOwner:!1}},created:function(){this.fetchForumTopic(),this.limit=this.$route.query.limit?this.$route.query.limit:this.limit,this.offset=this.$route.query.offset?this.$route.query.offset:this.offset,this.baseUrl="forum/".concat(this.forumPost.id,"/thread"),"employer"===this.$session.get("category")&&this.$router.push("/jobs")},computed:Object(o["a"])({},Object(u["c"])({forumTopics:"fetchForumTopics",forumPost:"getForumPost",loggedUser:"getLoggedUser"})),methods:Object(o["a"])({},Object(u["d"])(["saveForumPost"]),{setForumPost:function(t){this.saveForumPost(t)},fetchForumTopic:function(){var t=this;return this.loadingThreads=!0,Object(f["e"])(this.$route.params.id).then(function(e){if(200===e.status&&(t.threadsLoaded=!0,t.forum=e.data.data,t.threads=e.data.data.thread,t.threads.forEach(function(e){return e.user_id===t.loggedUser.id&&(t.isThreadOwner=!0,!0)}),t.forum.user_id===t.loggedUser.id))return t.isTopicOwner=!0,!0}).catch(function(e){return t.threadsLoaded=!1,e}).finally(function(){t.loadingThreads=!1}),!0},createThread:function(){var t=this;return this.loading=!0,this.validate(this.itemData,m["a"].thread),n()(this.issues).length>1?(this.errors=this.issues,!1):(Object(f["a"])(this.forumPost.id,Object(o["a"])({},this.itemData,{forum_topic_id:this.forumPost.id,user_id:this.loggedUser.id})).then(function(e){return 201===e.status&&(t.loading=!1,t.threads.push(Object(o["a"])({},e.data,{user:t.loggedUser})),t.threadsLoaded=!0,t.clearFormField(),!0)}).catch(function(e){return t.loading=!1,t.threadsLoaded=!1,e}),!0)},reportForumTopic:function(){var t={user_id:this.loggedUser.id,topic_id:this.$route.params.id};return Object(f["h"])(t).then(function(t){return 200===t.status&&(Object(h["b"])({title:"Success! Forum topic has been reported!"}),!0)}).catch(function(t){return Object(h["a"])({title:"Oops! Something went wrong",text:t.data}),!1}),!0},reportForumComment:function(t){var e={user_id:this.loggedUser.id,forum_topic_id:this.$route.params.id,comment_id:t.id};return Object(f["g"])(e).then(function(t){return 200===t.status&&(Object(h["b"])({title:"Success! Forum comment has been reported!"}),!0)}).catch(function(t){return Object(h["a"])({title:"Oops! Something went wrong",text:t.data}),!1}),!0}}),watch:{forumPost:function(){window.location.reload()}},components:{Pagination:c["a"],Loader:l["a"]},filters:{date:function(t){return moment(t).fromNow()}}},p=_,g=(s("834b"),s("2877")),b=Object(g["a"])(p,a,i,!1,null,"21885814",null);e["default"]=b.exports},c933:function(t,e,s){}}]);
//# sourceMappingURL=forum-thread.9f693fff.js.map