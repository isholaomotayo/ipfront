(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["discussionpage"],{"4d0f":function(t,e,s){"use strict";s.d(e,"k",function(){return c}),s.d(e,"e",function(){return u}),s.d(e,"f",function(){return d}),s.d(e,"a",function(){return l}),s.d(e,"l",function(){return m}),s.d(e,"m",function(){return h}),s.d(e,"o",function(){return f}),s.d(e,"i",function(){return g}),s.d(e,"b",function(){return b}),s.d(e,"h",function(){return p}),s.d(e,"d",function(){return _}),s.d(e,"j",function(){return v}),s.d(e,"c",function(){return y}),s.d(e,"g",function(){return w}),s.d(e,"n",function(){return x});var a=s("795b"),n=s.n(a),r=s("bc3a"),i=s.n(r),o=s("5f87");function c(t,e){return Object(o["b"])()?i.a.get("/v1/classes/filter?status=".concat(t,"&career_id=").concat(e)):n.a.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function u(t,e){return Object(o["b"])()?i.a.get("/v1/classes/".concat(t,"?userId=").concat(e)):n.a.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function d(t){return Object(o["b"])()?i.a.get("/v1/classes/".concat(t,"/forum")):n.a.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function l(t,e){return Object(o["b"])()?i.a.post("/v1/classes/".concat(t,"/forum"),e):n.a.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function m(t,e,s){return Object(o["b"])()?i.a.get("/v1/classes/".concat(t,"/lessons/").concat(e,"?userId=").concat(s)):n.a.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function h(t,e,s,a){return Object(o["b"])()?i.a.get("/v1/classes/".concat(t,"/lessons/").concat(e,"/modules/").concat(s,"?userId=").concat(a)):n.a.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function f(t,e){return Object(o["b"])()?i.a.post("/v1/classes/".concat(t,"/learners"),e):n.a.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function g(t,e){return Object(o["b"])()?i.a.get("/v1/classes/".concat(t,"/forum/").concat(e)).then(function(t){return t}):n.a.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function b(t,e,s){return Object(o["b"])()?i.a.post("/v1/classes/".concat(t,"/forum/").concat(e,"/thread"),s):n.a.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function p(t){return Object(o["b"])()?i.a.get("/v1/classes/".concat(t,"/quiz")):n.a.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function _(t,e){return Object(o["b"])()?i.a.delete("/v1/classes/".concat(t,"/forum/").concat(e)):n.a.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function v(t,e){return Object(o["b"])()?i.a.get("/v1/classes/".concat(t,"/forum/").concat(e,"/thread")).then(function(t){return t}):n.a.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function y(t,e,s){return Object(o["b"])()?i.a.delete("/v1/classes/".concat(t,"/forum/").concat(e,"/thread/").concat(s)):n.a.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function w(t,e){return Object(o["b"])()?i.a.get("/v1/classes/".concat(t,"/learners/").concat(e)):n.a.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}function x(t,e){return Object(o["b"])()?i.a.get("/v1/classes/".concat(t,"/user/").concat(e)):n.a.resolve(new Response({message:"Unauthorised"},{status:403,statusText:"Unauthorised"}))}},"555f":function(t,e,s){"use strict";var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("svg",{staticClass:"lds-spinner",staticStyle:{background:"none"},attrs:{width:"50px",height:"50px",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"}},[s("g",{attrs:{transform:"rotate(0 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.9166666666666666s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(30 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.8333333333333334s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(60 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.75s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(90 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.6666666666666666s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(120 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.5833333333333334s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(150 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.5s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(180 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.4166666666666667s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(210 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.3333333333333333s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(240 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.25s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(270 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.16666666666666666s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(300 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"-0.08333333333333333s",repeatCount:"indefinite"}})])]),s("g",{attrs:{transform:"rotate(330 50 50)"}},[s("rect",{attrs:{x:"47",y:"24",rx:"9.4",ry:"4.8",width:"6",height:"12",fill:"#215d38"}},[s("animate",{attrs:{attributeName:"opacity",values:"1;0",keyTimes:"0;1",dur:"1s",begin:"0s",repeatCount:"indefinite"}})])])])},n=[],r={name:"Loader"},i=r,o=s("2877"),c=Object(o["a"])(i,a,n,!1,null,null,null);e["a"]=c.exports},"707c":function(t,e,s){t.exports=s.p+"img/profile.a46d8ad4.jpg"},"77b9":function(t,e,s){"use strict";var a=s("f0b1"),n=s.n(a),r={create:{title:n.a.string().min(2).required(),description:n.a.string().min(7).required()},thread:{body:n.a.string().min(2).required()}};e["a"]=r},"7c9f":function(t,e,s){"use strict";var a=s("e7cf"),n=s.n(a);n.a},e7cf:function(t,e,s){},ee85:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.loadingItemData?[a("div",{staticClass:"div__loading"},[a("loader")],1)]:[a("section",{staticClass:"section forum"},[a("div",{staticClass:"container"},[a("div",{staticClass:"section__row section__row--between"},[a("h4",{staticClass:"section__title"},[t._v(t._s(t.itemData.title))])]),a("div",[a("a",{staticClass:"link",on:{click:function(e){t.$router.go(-1)}}},[a("span",{staticClass:"icon"},[a("svg",{attrs:{width:"19",height:"14",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M14.28 3.85H1.34L4.06.8a.48.48 0 1 0-.72-.64L.28 3.6a1.1 1.1 0 0 0 0 1.46L3.34 8.5a.48.48 0 0 0 .68.04c.2-.18.22-.48.04-.68L1.34 4.8h12.94a3.76 3.76 0 0 1 0 7.52H12a.48.48 0 1 0 0 .96h2.28a4.72 4.72 0 0 0 0-9.44z",fill:"#000"}})])]),a("button",{staticClass:"btn__plain bg-secondary text-white-70"},[t._v("Go back")])]),a("button",{staticClass:"btn__plain"},[t._v("report")]),t.isDiscussionOwner?[a("button",{staticClass:"btn__plain",on:{click:function(e){return e.preventDefault(),t.deleteCourseForum(e)}}},[t._v("\n                                    Delete Post\n                            ")])]:t._e()],2)]),a("div",{staticClass:"container"},[a("div",{staticClass:"forum__wrapper"},[a("main",{staticClass:"forum__main"},[a("div",{staticClass:"forum__body"},[a("div",{staticClass:"forum__thread"},[a("ul",{},[a("li",{staticClass:"forum__post item__row"},[a("img",{staticClass:"post__img",attrs:{src:t.itemData.user.avatar,alt:""}}),a("div",{staticClass:"item__body"},[a("div",{},[a("span",{staticClass:"title bold"},[a("span",{staticClass:"title bold"},[t._v(t._s(t.itemData.user.fname+" "+t.itemData.user.lname))])]),a("span",{staticClass:"grey"},[t._v(t._s(t._f("date")(t.itemData.created_at)))])]),a("p",{staticClass:"forum__text"},[t._v(t._s(t.itemData.description))])])]),a("li",{staticClass:"forum__post item__row"},[t.itemData.user.avatar?a("img",{staticClass:"post__img",attrs:{src:t.itemData.user.avatar,alt:""}}):a("img",{staticClass:"post__img",attrs:{src:s("707c"),alt:""}}),a("form",{staticClass:"forum__post__form item__body",attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.createThread(e)}}},[a("label",{staticClass:"label--block",attrs:{for:"forum-thread"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment.body,expression:"comment.body"}],staticClass:"input input--lg",class:[{"is-invalid":t.errors.body}],attrs:{name:"",id:"forum-thread",cols:"50",rows:"3",placeholder:"Type here to reply..."},domProps:{value:t.comment.body},on:{keydown:function(e){t.clearErrors(e.target.name)},input:function(e){e.target.composing||t.$set(t.comment,"body",e.target.value)}}})]),a("div",{staticClass:"btn-group"},[a("button",{staticClass:"btn__primary btn__primary--alt",attrs:{"v-bind":{disabled:t.loading||!t.comment.body},type:"submit"},on:{click:function(e){return e.preventDefault(),t.createThread(e)}}},[t._v("Post Comment")]),t.loading?a("Loader"):t._e()],1)])])]),t.threads.length?a("h5",{staticClass:"bold"},[t._v(t._s(t.threads.length)+" comments")]):t._e(),a("ul",{staticClass:"forum__thread"},[[t.threads.length>0?t._l(t.threads,function(e){return a("li",{key:e.id},[a("div",{staticClass:"forum__post item__row thread"},[a("img",{staticClass:"post__img post__img--sm",attrs:{src:e.user.avatar,alt:""}}),a("div",{staticClass:"item__body"},[a("p",{staticClass:"forum__text"},[a("span",{staticClass:"bold"},[t._v("\n                                                                    "+t._s(e.user.fname+" "+e.user.lname)+"\n                                                                ")]),t._v("\n                                                                "+t._s(e.body)+"\n                                                            ")]),a("div",{staticClass:"item__meta"},[a("span",[t._v("\n                                                                    "+t._s(t._f("date")(e.created_at))+"\n                                                                ")]),t.isThreadOwner?[a("button",{staticClass:"btn__plain btn__plain--sm",on:{click:function(s){t.deleteCourseDiscussionThread(e.id)}}},[t._v("Delete")])]:t._e()],2)])])])}):[t._v("\n                                                No comments\n                                            ")]]],2)])])])])])])]],2)},n=[],r=(s("ac6a"),s("cebc")),i=s("a4bb"),o=s.n(i),c=(s("cadf"),s("551c"),s("f751"),s("097d"),s("2f62")),u=s("4d0f"),d=s("77b9"),l=s("e49c"),m=s("eae4"),h=s("555f"),f={name:"DiscussionPage",mixins:[l["a"]],props:{joinedCourse:[Boolean,String]},data:function(){return{loadingItemData:!0,itemData:{},itemDataLoaded:!1,threads:[],loadingThreads:!0,threadsLoaded:!1,errors:{},comment:{body:""},loading:!1,isDiscussionOwner:!1,isThreadOwner:!1}},mounted:function(){this.getDiscussionThread(),this.getDiscussionThreadList()},methods:{getDiscussionThread:function(){var t=this,e=this.$route.params,s=e.id,a=e.discussionId;Object(u["i"])(s,a).then(function(e){return 200===e.status?(t.itemData=e.data.data,t.itemData.user_id===t.loggedUser.id?(t.isDiscussionOwner=!0,!0):(t.itemDataLoaded=!0,!0)):(t.itemDataLoaded=!1,!1)}).catch(function(e){return t.itemDataLoaded=!1,!1}).finally(function(){t.loadingItemData=!1})},createThread:function(){var t=this;if(this.validate(this.comment,d["a"].thread),o()(this.issues).length>0)return this.errors=this.issues,!1;var e=this.$route.params,s=e.id,a=e.discussionId;return Object(u["b"])(s,a,Object(r["a"])({},this.comment,{class_forum_id:a,user_id:this.loggedUser.id})).then(function(e){return 201===e.status?(Object(m["b"])({title:"Success! Added new discussion comment."}),t.comment.body="",t.threads.unshift(Object(r["a"])({},e.data,{user:t.loggedUser})),t.threadsLoaded=!0,!0):(t.threadsLoaded=!1,!1)}).catch(function(e){return Object(m["a"])({title:"Oops! Something went wrong",text:e.data}),t.threadsLoaded=!1,!1}),!0},deleteCourseForum:function(){var t=this,e=this.$route.params,s=e.id,a=e.discussionId;return Object(u["d"])(s,a).then(function(e){return 200===e.status&&(Object(m["b"])({title:"Success! Course Discussion has been deleted."}),t.$router.push("/courses/".concat(s)),!0)}).catch(function(t){return Object(m["a"])({title:"Oops! Something went wrong",text:t.data}),!1}),!0},getDiscussionThreadList:function(){var t=this,e=this.$route.params,s=e.id,a=e.discussionId;Object(u["j"])(s,a).then(function(e){return 200===e.status?(t.threads=e.data.data,t.threads.forEach(function(e){return e.user_id===t.loggedUser.id&&(t.isThreadOwner=!0,!0)}),t.threadsLoaded=!0,!0):(t.threadsLoaded=!1,!1)}).catch(function(e){return t.threadsLoaded=!1,!1}).finally(function(){t.loadingThreads=!1})},deleteCourseDiscussionThread:function(t){var e=this,s=this.$route.params,a=s.id,n=s.discussionId,i=t;return Object(u["c"])(a,n,i).then(function(t){return 200===t.status&&(e.threads.shift(Object(r["a"])({},t.data)),Object(m["b"])({title:"Success! Discussion thread has been deleted."}),!0)}).catch(function(t){return Object(m["a"])({title:"Oops! Something went wrong",text:t.data}),!1}),!0}},filters:{date:function(t){return moment(t).fromNow()}},components:{Loader:h["a"]},computed:Object(r["a"])({},Object(c["c"])({loggedUser:"getLoggedUser"}))},g=f,b=(s("7c9f"),s("2877")),p=Object(b["a"])(g,a,n,!1,null,"bf09af46",null);e["default"]=p.exports}}]);
//# sourceMappingURL=discussionpage.590dfc99.js.map